ğŸ“Œ Â¿CuÃ¡ndo usar cada uno?

Usar .lean() cuando:

Vas a leer datos para devolver al cliente.

No necesitÃ¡s mutar ni usar mÃ©todos de documento.

EstÃ¡s en endpoints tipo GET o listado.

QuerÃ©s performance (queries masivas, listados grandes).

Usar .toObject() cuando:

ReciÃ©n hiciste un .create() o .save() y querÃ©s devolver el objeto limpio.

QuerÃ©s aplicar transformaciones definidas en schema.set("toObject", { transform }).

TenÃ©s un doc Ãºnico (no un array gigante), y el costo de la conversiÃ³n es despreciable.

Usar ninguno (dejar como doc Mongoose) cuando:

Vas a seguir trabajando con el documento (ej: doc.populate(), doc.save(), hooks).

EstÃ¡s en lÃ³gica de negocio interna, no en la capa de respuesta.


En servicios de lectura (GET/listados): .lean() siempre.
â†’ MÃ¡s rÃ¡pido, evita fugas de lÃ³gica en el cliente.

En escritura inmediata (create(), save()): .toObject() al devolver.
â†’ Te aseguras devolver un JSON puro.

En lÃ³gica interna de negocio: usÃ¡ el documento crudo de Mongoose.